<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Hacker News Kristofer</title>
</head>

<body>

  <h1>News</h1>
  <section id="section">
    <div id='posts'></div>
  </section>
</body>

<script>
  const API_URL = `http://localhost:8080`

  function fetchData() {
    fetch(`${API_URL}/news`)
    .then((res) => {
      //console.log("res is ", Object.prototype.toString.call(res));
      return res.json();
    })
    .then((data) => {
      show(data)
    })
    .catch((error) => {
      console.log(`Error Fetching data : ${error}`)
      document.getElementById('posts').innerHTML = 'Error Loading Data'
    })
}

function show(data) {
    const ul = document.getElementById('posts');
    const list = document.createDocumentFragment();

    data.map(function (post) {
        let li = document.createElement('li');
        let title = document.createElement('h2');
        let body = document.createElement('p');
        title.innerHTML = `<a href="${post.url}">${post.title}</a>`;
        body.innerHTML = `${post.url}`;

        li.appendChild(title);
        li.appendChild(body);
        list.appendChild(li);
    });

    ul.appendChild(list);
}
fetchData()

</script>

</html>